{"remainingRequest":"D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\src\\views\\pinda\\user\\org\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\src\\views\\pinda\\user\\org\\Index.vue","mtime":1586850940076},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\集成goodsinfo\\pinda-authority-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\\\u54C1\\u8FBE\\u901A\\u7528\\u6743\\u9650\\u7CFB\\u7EDF\\\\\\u8D44\\u6599\\\\\\u524D\\u7AEF\\u5DE5\\u7A0B\\\\\\u96C6\\u6210goodsinfo\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"D:\\\\\\u54C1\\u8FBE\\u901A\\u7528\\u6743\\u9650\\u7CFB\\u7EDF\\\\\\u8D44\\u6599\\\\\\u524D\\u7AEF\\u5DE5\\u7A0B\\\\\\u96C6\\u6210goodsinfo\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/objectSpread2\"));\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"D:\\\\\\u54C1\\u8FBE\\u901A\\u7528\\u6743\\u9650\\u7CFB\\u7EDF\\\\\\u8D44\\u6599\\\\\\u524D\\u7AEF\\u5DE5\\u7A0B\\\\\\u96C6\\u6210goodsinfo\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _Org = _interopRequireDefault(require(\"@/api/Org.js\"));\n\nvar _OrgType = _interopRequireDefault(require(\"@/api/OrgType.json\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'OrgManager',\n  data: function data() {\n    return {\n      name: '',\n      orgTypeOptions: '',\n      orgTree: [],\n      parentName: '无上级',\n      provinceList: [],\n      cityList: [],\n      countryList: [],\n      managerList: [],\n      requestParameters: {},\n      org: this.initOrg(),\n      rules: {\n        name: [{\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 255,\n          message: this.$t('rules.range3to10'),\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.orgTypeOptions = _OrgType.default;\n    this.initOrgTree();\n    this.showcity();\n    this.getManagerList();\n  },\n  methods: {\n    initOrg: function initOrg() {\n      return {\n        id: '',\n        abbreviation: '',\n        name: '',\n        orgType: '',\n        address: '',\n        contractNumber: '',\n        provinceId: '',\n        cityId: '',\n        countyId: '',\n        managerId: '',\n        parentId: 0,\n        status: true,\n        describe: '',\n        sortValue: 0\n      };\n    },\n    showcity: function () {\n      var _showcity = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.requestParameters.parentId = 0;\n\n                _Org.default.areaList(this.requestParameters).then(function (response) {\n                  _this.provinceList = response.data;\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function showcity() {\n        return _showcity.apply(this, arguments);\n      }\n\n      return showcity;\n    }(),\n    showcity1: function () {\n      var _showcity2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.requestParameters.parentId = 0;\n\n                _Org.default.areaList(this.requestParameters).then(function (response) {\n                  _this2.provinceList = response.data;\n                });\n\n                this.getProvince1();\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function showcity1() {\n        return _showcity2.apply(this, arguments);\n      }\n\n      return showcity1;\n    }(),\n    getProvince1: function () {\n      var _getProvince = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _yield$orgApi$areaLis, res;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(this.org.provinceId != 0)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                this.requestParameters.parentId = this.org.provinceId;\n                _context3.next = 4;\n                return _Org.default.areaList(this.requestParameters);\n\n              case 4:\n                _yield$orgApi$areaLis = _context3.sent;\n                res = _yield$orgApi$areaLis.data;\n                this.cityList = res;\n                this.getCity1();\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getProvince1() {\n        return _getProvince.apply(this, arguments);\n      }\n\n      return getProvince1;\n    }(),\n    getProvince: function () {\n      var _getProvince2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var _yield$orgApi$areaLis2, res;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.org.provinceId != 0)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                this.requestParameters.parentId = this.org.provinceId;\n                _context4.next = 4;\n                return _Org.default.areaList(this.requestParameters);\n\n              case 4:\n                _yield$orgApi$areaLis2 = _context4.sent;\n                res = _yield$orgApi$areaLis2.data;\n                this.cityList = res;\n                this.org.cityId = '';\n                this.getCity();\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getProvince() {\n        return _getProvince2.apply(this, arguments);\n      }\n\n      return getProvince;\n    }(),\n    getCity: function () {\n      var _getCity = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        var _yield$orgApi$areaLis3, res;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!(this.org.cityId != 0)) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                this.requestParameters.parentId = this.org.cityId;\n                _context5.next = 4;\n                return _Org.default.areaList(this.requestParameters);\n\n              case 4:\n                _yield$orgApi$areaLis3 = _context5.sent;\n                res = _yield$orgApi$areaLis3.data;\n                this.countryList = res;\n                this.org.countyId = '';\n\n              case 8:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getCity() {\n        return _getCity.apply(this, arguments);\n      }\n\n      return getCity;\n    }(),\n    getCity1: function () {\n      var _getCity2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {\n        var _yield$orgApi$areaLis4, res;\n\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(this.org.cityId != 0)) {\n                  _context6.next = 7;\n                  break;\n                }\n\n                this.requestParameters.parentId = this.org.cityId;\n                _context6.next = 4;\n                return _Org.default.areaList(this.requestParameters);\n\n              case 4:\n                _yield$orgApi$areaLis4 = _context6.sent;\n                res = _yield$orgApi$areaLis4.data;\n                this.countryList = res;\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getCity1() {\n        return _getCity2.apply(this, arguments);\n      }\n\n      return getCity1;\n    }(),\n    getArea: function getArea() {\n      console.log(this.countryCode);\n    },\n    // 获取负责人列表\n    getManagerList: function () {\n      var _getManagerList = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n        var _this3 = this;\n\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _Org.default.managerList().then(function (response) {\n                  _this3.managerList = response.data;\n                });\n\n              case 1:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      function getManagerList() {\n        return _getManagerList.apply(this, arguments);\n      }\n\n      return getManagerList;\n    }(),\n    initOrgTree: function initOrgTree() {\n      var _this4 = this;\n\n      _Org.default.allTree({}).then(function (response) {\n        var res = response.data;\n        _this4.orgTree = res.data;\n      });\n    },\n    exportExcel: function exportExcel() {\n      this.$message({\n        message: '待完善',\n        type: 'warning'\n      }); // this.$download('system/org/excel', {\n      //   name: this.name\n      // }, `org_${new Date().getTime()}.xlsx`)\n    },\n    handleNumChange: function handleNumChange(val) {\n      this.org.sortValue = val;\n    },\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data.label.indexOf(value) !== -1;\n    },\n    nodeClick: function nodeClick(data) {\n      var _this5 = this;\n\n      this.org = (0, _objectSpread2.default)({}, data);\n\n      _Org.default.getOrg({\n        ids: this.org.parentId\n      }).then(function (response) {\n        var res = response.data;\n        _this5.parentName = res.data[0].name;\n      });\n\n      this.showcity1();\n      this.$refs.form.clearValidate();\n    },\n    add: function add() {\n      var _this6 = this;\n\n      this.resetForm();\n      var checked = this.$refs.orgTree.getCheckedKeys();\n      console.log(checked);\n\n      if (checked.length > 1) {\n        this.$message({\n          message: this.$t('tips.onlyChooseOne'),\n          type: 'warning'\n        });\n      } else if (checked.length > 0) {\n        _Org.default.getOrg({\n          ids: checked[0]\n        }).then(function (response) {\n          var res = response.data;\n          _this6.parentName = res.data[0].name;\n        });\n\n        this.org.parentId = checked[0];\n      } else {\n        this.org.parentId = 0;\n        this.parentName = '无上级';\n      }\n    },\n    deleteOrg: function deleteOrg() {\n      var _this7 = this;\n\n      var checked = this.$refs.orgTree.getCheckedKeys();\n\n      if (checked.length === 0) {\n        this.$message({\n          message: this.$t('tips.noNodeSelected'),\n          type: 'warning'\n        });\n      } else {\n        this.$confirm(this.$t('tips.confirmDeleteNode'), this.$t('common.tips'), {\n          confirmButtonText: this.$t('common.confirm'),\n          cancelButtonText: this.$t('common.cancel'),\n          type: 'warning'\n        }).then(function () {\n          _Org.default.delete({\n            ids: checked\n          }).then(function (response) {\n            var res = response.data;\n\n            if (res.isSuccess) {\n              _this7.$message({\n                message: _this7.$t('tips.deleteSuccess'),\n                type: 'success'\n              });\n            }\n\n            _this7.reset();\n          });\n        }).catch(function () {\n          _this7.$refs.orgTree.setCheckedKeys([]);\n        });\n      }\n    },\n    search: function search() {\n      this.$refs.orgTree.filter(this.name);\n    },\n    reset: function reset() {\n      this.initOrgTree();\n      this.name = '';\n      this.resetForm();\n    },\n    submit: function submit() {\n      var _this8 = this;\n\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          if (_this8.org.id) {\n            _this8.update();\n          } else {\n            _this8.save();\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    save: function save() {\n      var _this9 = this;\n\n      _Org.default.save((0, _objectSpread2.default)({}, this.org)).then(function (response) {\n        var res = response.data;\n\n        if (res.isSuccess) {\n          _this9.$message({\n            message: _this9.$t('tips.createSuccess'),\n            type: 'success'\n          });\n        }\n\n        _this9.reset();\n      });\n    },\n    update: function update() {\n      var _this10 = this;\n\n      console.log((0, _objectSpread2.default)({}, this.org));\n\n      _Org.default.update((0, _objectSpread2.default)({}, this.org)).then(function (response) {\n        var res = response.data;\n\n        if (res.isSuccess) {\n          _this10.$message({\n            message: _this10.$t('tips.updateSuccess'),\n            type: 'success'\n          });\n        }\n\n        _this10.reset();\n      });\n    },\n    resetForm: function resetForm() {\n      this.$refs.form.clearValidate();\n      this.$refs.form.resetFields();\n      this.org = this.initOrg();\n    }\n  }\n};\nexports.default = _default;",null]}